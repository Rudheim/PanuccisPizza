!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";function i(e,t){var n=document.querySelector("#".concat(e)),i=t;M.Modal.getInstance(n).close(),i.reset()}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var o=function(){document.querySelectorAll(".icons").forEach((function(e){e.addEventListener("mouseover",(function(e){e.target.parentElement.classList.add("pulse")})),e.addEventListener("mouseout",(function(e){e.target.parentElement.classList.remove("pulse")}))}))};function r(e){M.updateTextFields(),M.textareaAutoResize(e)}document.addEventListener("DOMContentLoaded",(function(e){var t=document.querySelector("select");M.FormSelect.init(t)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".scrollspy");M.ScrollSpy.init(e)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".sidenav");M.Sidenav.init(e)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".parallax");M.Parallax.init(e)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".modal");M.Modal.init(e)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".tabs");M.Tabs.init(e)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".dropdown-trigger");M.Dropdown.init(e,{closeOnClick:!0,hover:!0,coverTrigger:!1})}))},,function(e,t,n){"use strict";n.r(t),n.d(t,"setupUI",(function(){return x}));var i=n(0),o=db.collection("users");auth.onAuthStateChanged((function(e){e&&e.getIdTokenResult().then((function(t){e.admin=t.claims.admin,o.doc(e.uid).get().then((function(t){x(e,t)}))}))}));var r=document.querySelector("#signup-form");r.addEventListener("submit",(function(e){e.preventDefault();var t=r["signup-email"].value,n=r["signup-password"].value;auth.createUserWithEmailAndPassword(t,n).then((function(e){return o.doc(e.user.uid).set({name:r.nickname.value})})).then((function(){Object(i.a)("modal-signup",r)})).catch((function(e){return console.log(e.message)}))}));var a=document.querySelector("#login-form");a.addEventListener("submit",(function(e){e.preventDefault();var t=a["login-email"].value,n=a["login-password"].value;auth.signInWithEmailAndPassword(t,n).then((function(e){Object(i.a)("modal-login",a)})).catch((function(e){return console.log(e.message)}))})),document.querySelector("#logout").addEventListener("click",(function(e){e.preventDefault(),auth.signOut().then((function(){location.reload()}))}));var c=document.querySelector(".admin-actions");c.addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector("#admin-email").value;functions.httpsCallable("addAdminRole")({email:t}).then((function(e){console.log(e)})),Object(i.a)("modal-account",c)}));var d=db.collection("pizzas"),l=document.querySelector("#pizza-list"),u=function(e){var t="\n      <tr pizza-id=".concat(e.id,'>\n        <td><i href="#modal_edit" class="material-icons delete green-text darken-1-text modal-trigger">edit</i></td>\n        <td>').concat(e.data().title,"</td>\n        <td>").concat(e.data().price,'</td>\n        <td><i class="material-icons delete red-text darken-1-text">delete</i></td>\n      </tr>\n    ');l.innerHTML+=t},s=function(e,t){var n=document.querySelector("#".concat(e)).files[0];if(n){var i=Math.floor(999*Math.random())+n.name,o={contentType:n.type};storage.ref().child(i).put(n,o).then((function(e){e.ref.getDownloadURL().then((function(e){t.src=e}))})).catch((function(e){return console.log(e.message)}))}else console.log("You need to choose a file first")},m=document.querySelector("#addPizza"),f=document.querySelector("#upload-btn"),g=document.querySelector("#img-create");f.addEventListener("click",(function(e){e.preventDefault(),s("file-create",g)})),m.addEventListener("submit",(function(e){e.preventDefault(),d.add({title:m.title.value,price:parseInt(m.price.value),vegan:y(m.vegan.value),img:g.src,description:m.description.value}).then((function(){Object(i.a)("modal_create",m)})).catch((function(e){console.log(e.message)}))}));var v=document.querySelector("#pizzaList"),p=document.querySelector("#editPizza"),h=document.querySelector("#img-edit");v.addEventListener("click",(function(e){if("I"===e.target.tagName&&"edit"==e.target.textContent){var t=e.target.parentElement.parentElement.getAttribute("pizza-id");d.doc(t).get().then((function(e){p.disabled.value=t,p["edit-title"].value=e.data().title,p["edit-price"].value=e.data().price,p["vegan-edit"].value=e.data().vegan,p["edit-description"].value=e.data().description,h.src=e.data().img,Object(i.c)(p["edit-description"])})).catch((function(e){console.log(e.message)}))}})),document.querySelector("#upload-btn-edit").addEventListener("click",(function(e){e.preventDefault(),s("file-edit",h)})),p.addEventListener("submit",(function(e){e.preventDefault();var t=p.disabled.value;d.doc(t).set({title:p["edit-title"].value,price:parseInt(p["edit-price"].value),vegan:y(p["vegan-edit"].value),img:h.src,description:p["edit-description"].value}).then((function(){Object(i.a)("modal_edit",p)})).catch((function(e){console.log(e.message)}))})),v.addEventListener("click",(function(e){if("I"===e.target.tagName&&"delete"==e.target.textContent){var t=e.target.parentElement.parentElement.getAttribute("pizza-id");d.doc(t).delete().then((function(){console.log("item deleted")})).catch((function(e){console.error("Error removing document: ",e)}))}}));var y=function(e){return"true"==e},b=db.collection("ingredients"),E=document.querySelector("#ing_list"),S=function(e){var t="\n    <tr ingredient-id=".concat(e.id,'>\n      <td><i href="#modal_edit_ingredient" class="material-icons delete green-text darken-1-text modal-trigger">edit</i></td>\n      <td>').concat(e.data().name,"</td>\n      <td>").concat(e.data().price,'</td>\n      <td><i class="material-icons delete red-text darken-1-text">delete</i></td>\n    </tr>\n  ');E.innerHTML+=t},_=document.querySelector("#addIngredientForm");_.addEventListener("submit",(function(e){e.preventDefault(),b.add({name:_.ing_name.value,price:parseInt(_.ing_price.value),description:_.ing_description.value}).then((function(){Object(i.a)("modal_create_ingredient",_)})).catch((function(e){console.log(e.message)}))}));var L=document.querySelector("#IngredientList"),q=document.querySelector("#editIngredientForm");function O(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}L.addEventListener("click",(function(e){if("I"===e.target.tagName&&"edit"==e.target.textContent){var t=e.target.parentElement.parentElement.getAttribute("ingredient-id");b.doc(t).get().then((function(e){q.disabled_ing.value=t,q.ing_name_edit.value=e.data().name,q.ing_price_edit.value=e.data().price,q.ing_description_edit.value=e.data().description,Object(i.c)(q.ing_description_edit)})).catch((function(e){console.log(e.message)}))}})),q.addEventListener("submit",(function(e){e.preventDefault();var t=q.disabled_ing.value;b.doc(t).set({name:q.ing_name_edit.value,price:parseInt(q.ing_price_edit.value),description:q.ing_description_edit.value}).then((function(){Object(i.a)("modal_edit_ingredient",q)})).catch((function(e){console.log(e.message)}))})),L.addEventListener("click",(function(e){if("I"===e.target.tagName&&"delete"==e.target.textContent){var t=e.target.parentElement.parentElement.getAttribute("ingredient-id");b.doc(t).delete().then((function(){console.log("item deleted")})).catch((function(e){console.error("Error removing document: ",e)}))}}));var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loggedOutElem=document.querySelectorAll(".logged-out"),this.loggedInElem=document.querySelectorAll(".logged-in"),this.adminItems=document.querySelectorAll(".admin"),this.accountIcon=document.querySelector("#account_icon"),this.accountDetails=document.querySelector(".account-details"),this.user_profile=document.querySelector("#user_profile"),this.greeting_msg=document.querySelector("#greeting")}var t,n,i;return t=e,(n=[{key:"logedIn",value:function(e,t){this.loggedInElem.forEach((function(e){"LI"==e.tagName?e.style.display="list-item":e.style.display="block"})),this.loggedOutElem.forEach((function(e){return e.style.display="none"})),this.accountIcon.style.color="#ff6f00",this.user_profile.profile_id.value=e.uid,this.user_profile.profile_name.value=t.data().name,this.user_profile.profile_email.value=e.email,this.accountDetails.value=e.admin?"Admin":"User",M.updateTextFields(),this.greeting_msg.textContent="Hi, ".concat(t.data().name)}},{key:"AdminUI",value:function(){this.adminItems.forEach((function(e){return e.style.display="block"})),d.onSnapshot((function(e){l.innerHTML="",e.docs.forEach((function(e){u(e)}))})),b.onSnapshot((function(e){E.innerHTML="",e.docs.forEach((function(e){S(e)}))}))}},{key:"logedOut",value:function(){location.reload()}}])&&O(t.prototype,n),i&&O(t,i),e}(),x=function(e,t){var n=new I;e?(e.admin&&n.AdminUI(),n.logedIn(e,t)):n.logedOut()}}]);