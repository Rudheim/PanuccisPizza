!function(e){var t={};function n(d){if(t[d])return t[d].exports;var a=t[d]={i:d,l:!1,exports:{}};return e[d].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,d){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:d})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var d=Object.create(null);if(n.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(d,a,function(t){return e[t]}.bind(null,a));return d},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var d=document.querySelector("#ingredients-list"),a=db.collection("ingredients");var i=function(){a.get().then((function(e){e.docs.forEach((function(e){!function(e){var t=document.createElement("a"),n=document.createElement("span"),a=document.createElement("p"),i=document.createElement("span");t.setAttribute("ingredient-id",e.id),n.textContent=e.data().name,a.textContent=e.data().description,i.textContent=e.data().price,t.appendChild(n).classList.add("title"),t.appendChild(i).classList.add("secondary-content"),t.appendChild(a),d.appendChild(t).classList.add("collection-item")}(e)}))}))},r=document.querySelector("#customer-list"),c=document.querySelector("#total"),o=document.querySelector("#order"),l=db.collection("orders");function s(e){l.doc(e).onSnapshot((function(e){!function(e){r.innerHTML="";var t=[],n=0;0===e.ingredients.length&&(c.textContent="",o.classList.add("hidden")),e.ingredients.forEach((function(e){var d=e.split(", "),a=document.createElement("a"),i=document.createElement("span"),l=document.createElement("span"),s=document.createElement("i");a.setAttribute("position-id",n),n++,i.textContent=d[0],l.textContent=parseInt(d[1]),s.innerText="delete",t.push(parseInt(d[1])),a.appendChild(s).classList.add("material-icons","delete","red-text","darken-1-text"),a.appendChild(i).classList.add("title"),a.appendChild(l).classList.add("secondary-content"),r.appendChild(a).classList.add("collection-item"),c.textContent=t.reduce((function(e,t){return e+t}),0)+"$",o.classList.remove("hidden")}))}(e.data())}))}var u=document.querySelector("#menu"),m=db.collection("pizzas");var p="",f=document.querySelector("#create"),v=document.querySelector("#name"),h=document.querySelector("#search"),L=document.querySelector("select"),C=document.querySelector(".collapsible");m.get().then((function(e){e.docs.forEach((function(e){!function(e){var t=document.createElement("div"),n=document.createElement("div"),d=document.createElement("div"),a=document.createElement("img"),i=document.createElement("div"),r=document.createElement("span"),c=document.createElement("card-reveal"),o=document.createElement("span"),l=document.createElement("p"),s=document.createElement("i"),m=document.createElement("p"),p=document.createElement("div");n.setAttribute("pizza-id",e.id),a.src=e.data().img,r.textContent=e.data().title,l.textContent=e.data().description,o.textContent=e.data().title,s.innerText="close",m.innerText=e.data().price,d.appendChild(a).classList.add("activator"),n.appendChild(d).classList.add("card-image","waves-effect","waves-block","waves-light"),t.appendChild(n).classList.add("card"),i.appendChild(r).classList.add("card-title","activator","grey-text","text-darken-4"),p.appendChild(m).classList.add("right-align"),o.appendChild(s).classList.add("material-icons","right"),c.appendChild(o).classList.add("card-title","grey-text","text-darken-4"),c.appendChild(l),n.appendChild(i).classList.add("card-content"),n.appendChild(c).classList.add("card-reveal"),n.appendChild(p).classList.add("card-action"),u.appendChild(t).classList.add("col","s12","m6","l3")}(e)}))})),f.addEventListener("submit",(function(e){e.preventDefault(),i(),C.classList.remove("hidden"),f.classList.add("hidden");var t=new Date;l.add({created_at:firebase.firestore.Timestamp.fromDate(t),name:v.value,size:L.value,ingredients:""}).then((function(e){p=e.id})).catch((function(e){console.error("Error adding document: ",e)}))})),d.addEventListener("click",(function(e){if("UL"!==e.target.nodeName){var t=e.target.getAttribute("ingredient-id");a.doc(t).get().then((function(e){l.doc(p).update({ingredients:firebase.firestore.FieldValue.arrayUnion(e.data().name+", "+e.data().price)}).then((function(){s(p)}))}))}})),r.addEventListener("click",(function(e){if("I"===e.target.tagName){var t=e.target.parentElement.getAttribute("position-id");l.doc(p).get().then((function(e){var n=e.data().ingredients;n.splice(n.indexOf(n[t]),1),l.doc(p).update({ingredients:n}).then((function(){s(p)}))}))}}));h.addEventListener("keyup",(function(){!function(e){Array.from(d.children).filter((function(t){return!t.textContent.toLowerCase().includes(e)})).forEach((function(e){return e.classList.add("hidden")})),Array.from(d.children).filter((function(t){return t.textContent.toLowerCase().includes(e)})).forEach((function(e){return e.classList.remove("hidden")}))}(h.value.trim().toLowerCase())})),document.addEventListener("DOMContentLoaded",(function(e){var t=document.querySelector("select");M.FormSelect.init(t)})),document.addEventListener("DOMContentLoaded",(function(){var e=M.Collapsible.init(C);f.addEventListener("submit",(function(t){t.preventDefault(),e.open()}))})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".sidenav");M.Sidenav.init(e)})),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".parallax");M.Parallax.init(e)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL0luZ0xpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL09yZGVyTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvTWVudS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBwLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiaW5nX2xpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpbmdEQiIsImRiIiwiY29sbGVjdGlvbiIsImdldEluZyIsInRoZW4iLCJzbmFwc2hvdCIsImRvY3MiLCJmb3JFYWNoIiwiaW5ncmVkaWVudCIsImxpIiwiY3JlYXRlRWxlbWVudCIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJzZXRBdHRyaWJ1dGUiLCJpZCIsInRleHRDb250ZW50IiwiZGF0YSIsImFwcGVuZENoaWxkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVuZGVySW5ncmVkaWVudHMiLCJsaXN0IiwidG90YWwiLCJvcmRlckJUTiIsIm9yZGVyc0RCIiwiZ2V0TGlzdCIsImRvYyIsIm9uU25hcHNob3QiLCJpbm5lckhUTUwiLCJwcmljZXMiLCJwb3MiLCJpbmdyZWRpZW50cyIsImxlbmd0aCIsImRldGFpbHMiLCJzcGxpdCIsInRpdGxlIiwicGFyc2VJbnQiLCJpbm5lclRleHQiLCJwdXNoIiwicmVkdWNlIiwiYSIsImIiLCJyZW1vdmUiLCJyZW5kZXIiLCJtZW51IiwicGl6emFzIiwib3JkZXJJRCIsInNlYXJjaCIsInNpemUiLCJjb2xsYXBzIiwicGl6emEiLCJjb2wiLCJjYXJkIiwiY2FyZF9pbWciLCJpbWciLCJjYXJkX2NvbnRlbnQiLCJjYXJkX3RpdGxlIiwiY2FyZF9yZXZlYWwiLCJjYXJkX3RpdGxlX3JldmVhbCIsImFjdGlvbl9jYXJkIiwic3JjIiwicmVuZGVyTWVudSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJub3ciLCJEYXRlIiwiY3JlYXRlZF9hdCIsImZpcmViYXNlIiwiZmlyZXN0b3JlIiwiVGltZXN0YW1wIiwiZnJvbURhdGUiLCJvcmRlciIsImVycm9yIiwiY29uc29sZSIsInRhcmdldCIsIm5vZGVOYW1lIiwiZ2V0QXR0cmlidXRlIiwidXBkYXRlIiwiRmllbGRWYWx1ZSIsImFycmF5VW5pb24iLCJ0YWdOYW1lIiwicG9zSUQiLCJwYXJlbnRFbGVtZW50IiwiaW5nQXJyIiwic3BsaWNlIiwiaW5kZXhPZiIsInRlcm0iLCJBcnJheSIsImZyb20iLCJjaGlsZHJlbiIsImZpbHRlciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJmaWx0ZXJJbmdyZWRpZW50cyIsInRyaW0iLCJlbGVtIiwiTSIsIkZvcm1TZWxlY3QiLCJpbml0IiwiaW5zdGFuY2UiLCJDb2xsYXBzaWJsZSIsIm9wZW4iLCJTaWRlbmF2IiwiZWxlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiUGFyYWxsYXgiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxH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QVExRyxTQUFTMkcsaUJBQWlCLGFBQ3RCUixFQUFFUyxTQUFTUCxLQUFLSyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBpbmdfbGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbmdyZWRpZW50cy1saXN0Jyk7XHJcbmNvbnN0IGluZ0RCID0gZGIuY29sbGVjdGlvbignaW5ncmVkaWVudHMnKTtcclxuXHJcbmZ1bmN0aW9uIHJlbmRlckluZ3JlZGllbnRzKGluZ3JlZGllbnQpe1xyXG4gIFxyXG4gIC8vY3JlYXRlIGVsZW1lbnQgZm9yIGVhY2ggaW5ncmVkaWVudFxyXG4gIGxldCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICBsZXQgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgbGV0IHByaWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG5cclxuICAvLyBnaXZpbmcgZm9yIGVhY2ggY3JlYXRlZCBlbGVtZW50IGF0dHJpYnV0ZWQsIHZhbHVlcyBldGMuXHJcbiAgbGkuc2V0QXR0cmlidXRlKCdpbmdyZWRpZW50LWlkJywgaW5ncmVkaWVudC5pZCk7XHJcbiAgbmFtZS50ZXh0Q29udGVudCA9IGluZ3JlZGllbnQuZGF0YSgpLm5hbWU7XHJcbiAgZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBpbmdyZWRpZW50LmRhdGEoKS5kZXNjcmlwdGlvbjtcclxuICBwcmljZS50ZXh0Q29udGVudCA9IGluZ3JlZGllbnQuZGF0YSgpLnByaWNlO1xyXG5cclxuICAvL2FkZGluZyBlbGVtZW50cyB0byB0aGUgRE9NXHJcbiAgbGkuYXBwZW5kQ2hpbGQobmFtZSkuY2xhc3NMaXN0LmFkZCgndGl0bGUnKTtcclxuICBsaS5hcHBlbmRDaGlsZChwcmljZSkuY2xhc3NMaXN0LmFkZCgnc2Vjb25kYXJ5LWNvbnRlbnQnKTtcclxuICBsaS5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XHJcblxyXG4gIGluZ19saXN0LmFwcGVuZENoaWxkKGxpKS5jbGFzc0xpc3QuYWRkKCdjb2xsZWN0aW9uLWl0ZW0nKVxyXG59XHJcblxyXG4vL2dldHRpbmcgZGF0YSBmcm9tIGRiXHJcbmNvbnN0IGdldEluZyA9ICgpID0+IHtcclxuICBpbmdEQi5nZXQoKVxyXG4gICAgICAgLnRoZW4oKHNuYXBzaG90KSA9PiB7XHJcbiAgICAgICAgICBzbmFwc2hvdC5kb2NzLmZvckVhY2goaW5ncmVkaWVudCA9PiB7XHJcbiAgICAgICAgICAgIHJlbmRlckluZ3JlZGllbnRzKGluZ3JlZGllbnQpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCB7aW5nX2xpc3QsIGdldEluZywgaW5nREJ9IiwibGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY3VzdG9tZXItbGlzdCcpO1xyXG5sZXQgdG90YWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG90YWwnKTtcclxubGV0IG9yZGVyQlROID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI29yZGVyJyk7XHJcblxyXG5sZXQgb3JkZXJzREIgPSBkYi5jb2xsZWN0aW9uKCdvcmRlcnMnKVxyXG5cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcihkYXRhKXtcclxuICBsaXN0LmlubmVySFRNTCA9IFwiXCI7IC8vZGVsZXRpbmcgYWxsIGluc2lkZSB0aGUgbGlzdCB0byBwdXQgbmV3bHkgZ2VuZXJhdGVkIGxpc3QsIG90aGVyd2lzZSBpdCB3aWxsIHN0dWNrIG9uIGVhY2ggb3RoZXJcclxuXHJcbiAgbGV0IHByaWNlcyA9IFtdO1xyXG4gIGxldCBwb3MgPSAwO1xyXG5cclxuICAvL2FmdGVyIGRlbGV0aW5nIGxhc3QgaW5ncmVkaWVudCBhcnJheSBpcyBlbXB0eSBhbmQgcmVzdCBvZiB0aGUgY29kZSBkb2Vzbid0IGZpcmUsIHNvIHdlIGNsZWFyaW5nIHRoZSBmaWVsZCB3aGVyZSB0b3RhbCBjb3N0IGRpc3BsYXllZFxyXG4gIGlmKGRhdGEuaW5ncmVkaWVudHMubGVuZ3RoID09PSAwKXsgICBcclxuICAgIHRvdGFsLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICBvcmRlckJUTi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICB9XHJcblxyXG4gIGRhdGEuaW5ncmVkaWVudHMuZm9yRWFjaCgoaW5ncmVkaWVudCkgPT4ge1xyXG4gIFxyXG4gICAgbGV0IGRldGFpbHMgPSBpbmdyZWRpZW50LnNwbGl0KCcsICcpXHJcblxyXG4gICAgbGV0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgbGV0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgbGV0IHByaWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgbGV0IGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcblxyXG4gICAgbGkuc2V0QXR0cmlidXRlKCdwb3NpdGlvbi1pZCcsIHBvcyk7IC8vZ2l2aW5nIGVhY2ggaW5ncmVkaWVudCBjdXN0b20gaWQgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgcG9zaXRvbiBvZiB0aGUgaW5ncmVkaWVudCBpbiB0aGUgYXJyYXkgaW4gREJcclxuICAgIHBvcysrO1xyXG4gIFxyXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSBkZXRhaWxzWzBdO1xyXG4gICAgcHJpY2UudGV4dENvbnRlbnQgPSBwYXJzZUludChkZXRhaWxzWzFdKTsgLy9jb252ZXJ0aW5nIHN0cmluZyBpbnRvIGEgbnVtYmVyIHRvIGNvdW50IHRvdGFsIGNvc3Qgb2YgdGhlIG9yZGVyXHJcbiAgICBpLmlubmVyVGV4dCA9ICdkZWxldGUnO1xyXG5cclxuICAgIHByaWNlcy5wdXNoKHBhcnNlSW50KGRldGFpbHNbMV0pKSAvL3B1c2hpbmcgY29zdCBvZiBlYWNoIGluZ3JlZGllbnQgaW50byBhcnJheVxyXG5cclxuICAgIGxpLmFwcGVuZENoaWxkKGkpLmNsYXNzTGlzdC5hZGQoJ21hdGVyaWFsLWljb25zJywgJ2RlbGV0ZScsICdyZWQtdGV4dCcsICdkYXJrZW4tMS10ZXh0Jyk7XHJcbiAgICBsaS5hcHBlbmRDaGlsZCh0aXRsZSkuY2xhc3NMaXN0LmFkZCgndGl0bGUnKTtcclxuICAgIGxpLmFwcGVuZENoaWxkKHByaWNlKS5jbGFzc0xpc3QuYWRkKCdzZWNvbmRhcnktY29udGVudCcpO1xyXG4gICBcclxuICAgIGxpc3QuYXBwZW5kQ2hpbGQobGkpLmNsYXNzTGlzdC5hZGQoJ2NvbGxlY3Rpb24taXRlbScpO1xyXG4gICAgXHJcbiAgICB0b3RhbC50ZXh0Q29udGVudCA9IHByaWNlcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSArICckJzsgLy9jYWxjdWxhdGluZyBzdW0gb2YgYWxsIG9yZGVyZWQgaW5ncmVkaWVudHNcclxuICAgIG9yZGVyQlROLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG5cclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMaXN0KGlkKXtcclxuICAgIG9yZGVyc0RCLmRvYyhpZCkub25TbmFwc2hvdCgoZG9jKSA9PiB7XHJcbiAgICAgIHJlbmRlcihkb2MuZGF0YSgpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbmV4cG9ydCB7IGdldExpc3QsIG9yZGVyc0RCLCBsaXN0LCB0b3RhbCB9IiwiY29uc3QgbWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZW51Jyk7XHJcbmNvbnN0IHBpenphcyA9IGRiLmNvbGxlY3Rpb24oJ3BpenphcycpO1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyTWVudShwaXp6YSl7XHJcblxyXG4gIGxldCBjb2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBsZXQgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGxldCBjYXJkX2ltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICBsZXQgY2FyZF9jb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgbGV0IGNhcmRfdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgbGV0IGNhcmRfcmV2ZWFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FyZC1yZXZlYWwnKTtcclxuICBsZXQgY2FyZF90aXRsZV9yZXZlYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgbGV0IHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgbGV0IGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgbGV0IHByaWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIGxldCBhY3Rpb25fY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICBjYXJkLnNldEF0dHJpYnV0ZSgncGl6emEtaWQnLCBwaXp6YS5pZCk7XHJcbiAgaW1nLnNyYyA9IHBpenphLmRhdGEoKS5pbWc7XHJcbiAgY2FyZF90aXRsZS50ZXh0Q29udGVudCA9IHBpenphLmRhdGEoKS50aXRsZTtcclxuICBwLnRleHRDb250ZW50ID0gcGl6emEuZGF0YSgpLmRlc2NyaXB0aW9uO1xyXG4gIGNhcmRfdGl0bGVfcmV2ZWFsLnRleHRDb250ZW50ID0gcGl6emEuZGF0YSgpLnRpdGxlO1xyXG4gIGkuaW5uZXJUZXh0ID0gJ2Nsb3NlJztcclxuICBwcmljZS5pbm5lclRleHQgPSBwaXp6YS5kYXRhKCkucHJpY2U7XHJcblxyXG4gIGNhcmRfaW1nLmFwcGVuZENoaWxkKGltZykuY2xhc3NMaXN0LmFkZCgnYWN0aXZhdG9yJyk7XHJcbiAgY2FyZC5hcHBlbmRDaGlsZChjYXJkX2ltZykuY2xhc3NMaXN0LmFkZCgnY2FyZC1pbWFnZScsICd3YXZlcy1lZmZlY3QnLCAnd2F2ZXMtYmxvY2snLCAnd2F2ZXMtbGlnaHQnKTtcclxuICBjb2wuYXBwZW5kQ2hpbGQoY2FyZCkuY2xhc3NMaXN0LmFkZCgnY2FyZCcpO1xyXG4gIGNhcmRfY29udGVudC5hcHBlbmRDaGlsZChjYXJkX3RpdGxlKS5jbGFzc0xpc3QuYWRkKCdjYXJkLXRpdGxlJywgJ2FjdGl2YXRvcicsICdncmV5LXRleHQnLCAndGV4dC1kYXJrZW4tNCcpO1xyXG4gIGFjdGlvbl9jYXJkLmFwcGVuZENoaWxkKHByaWNlKS5jbGFzc0xpc3QuYWRkKCdyaWdodC1hbGlnbicpO1xyXG4gIGNhcmRfdGl0bGVfcmV2ZWFsLmFwcGVuZENoaWxkKGkpLmNsYXNzTGlzdC5hZGQoJ21hdGVyaWFsLWljb25zJywgJ3JpZ2h0Jyk7XHJcbiAgY2FyZF9yZXZlYWwuYXBwZW5kQ2hpbGQoY2FyZF90aXRsZV9yZXZlYWwpLmNsYXNzTGlzdC5hZGQoJ2NhcmQtdGl0bGUnLCAnZ3JleS10ZXh0JywgJ3RleHQtZGFya2VuLTQnKTtcclxuICBjYXJkX3JldmVhbC5hcHBlbmRDaGlsZChwKTtcclxuICBjYXJkLmFwcGVuZENoaWxkKGNhcmRfY29udGVudCkuY2xhc3NMaXN0LmFkZCgnY2FyZC1jb250ZW50Jyk7XHJcbiAgY2FyZC5hcHBlbmRDaGlsZChjYXJkX3JldmVhbCkuY2xhc3NMaXN0LmFkZCgnY2FyZC1yZXZlYWwnKTtcclxuICBjYXJkLmFwcGVuZENoaWxkKGFjdGlvbl9jYXJkKS5jbGFzc0xpc3QuYWRkKCdjYXJkLWFjdGlvbicpO1xyXG5cclxuICBtZW51LmFwcGVuZENoaWxkKGNvbCkuY2xhc3NMaXN0LmFkZCgnY29sJywgJ3MxMicsICdtNicsICdsMycpO1xyXG59XHJcblxyXG5jb25zdCBnZXRQaXp6YXMgPSAoKSA9PiB7XHJcbiAgcGl6emFzLmdldCgpXHJcbiAgICAgICAudGhlbigoc25hcHNob3QpID0+IHtcclxuICAgICAgICAgIHNuYXBzaG90LmRvY3MuZm9yRWFjaChwaXp6YSA9PiB7XHJcbiAgICAgICAgICAgIHJlbmRlck1lbnUocGl6emEpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCB7Z2V0UGl6emFzfSIsImltcG9ydCAnLi9JbmdMaXN0J1xyXG5pbXBvcnQgJy4vT3JkZXJMaXN0J1xyXG5pbXBvcnQgJy4vTWVudSdcclxuXHJcbmltcG9ydCB7IGluZ19saXN0LCBnZXRJbmcsIGluZ0RCIH0gZnJvbSAnLi9JbmdMaXN0J1xyXG5pbXBvcnQgeyBnZXRMaXN0LCBvcmRlcnNEQiwgbGlzdCwgdG90YWwgfSBmcm9tICcuL09yZGVyTGlzdCdcclxuaW1wb3J0IHsgZ2V0UGl6emFzIH0gZnJvbSAnLi9NZW51J1xyXG5cclxubGV0IG9yZGVySUQgPSAnJztcclxuXHJcbmNvbnN0IGNyZWF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjcmVhdGUnKTtcclxuY29uc3QgbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNuYW1lJyk7XHJcbmNvbnN0IHNlYXJjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2gnKTtcclxudmFyIHNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKVxyXG52YXIgY29sbGFwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb2xsYXBzaWJsZScpO1xyXG5cclxuZ2V0UGl6emFzKCk7XHJcblxyXG4vL1xyXG4vLy0tLWNyZWF0aW5nIG5ldyBkb2N1bWVudGluIERCIHRvIHN0b3JlIG9yZGVyIGRldGFpbHMgYW5kIHJldHJpZXZpbmcgdW5pcWUgaWQgZm9yIGVhY2ggb3JkZXJcclxuY3JlYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIFxyXG4gIGdldEluZygpO1xyXG5cclxuICBjb2xsYXBzLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gIGNyZWF0ZS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuXHJcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgb3JkZXJzREIuYWRkKHtcclxuICAgIGNyZWF0ZWRfYXQ6IGZpcmViYXNlLmZpcmVzdG9yZS5UaW1lc3RhbXAuZnJvbURhdGUobm93KSxcclxuICAgIG5hbWU6IG5hbWUudmFsdWUsXHJcbiAgICBzaXplOiBzaXplLnZhbHVlLFxyXG4gICAgaW5ncmVkaWVudHM6ICcnXHJcbiAgfSkudGhlbigob3JkZXIpID0+IHtcclxuICAgICAgb3JkZXJJRCA9IG9yZGVyLmlkO1xyXG4gIH0pLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIGRvY3VtZW50OiBcIiwgZXJyb3IpO1xyXG4gIH0pO1xyXG59KVxyXG5cclxuLy9cclxuLy8tLS1jaG9vc2luZyBkaXNlcmVkIGluZ3JlZGllbnRzIGFuZCBhZGRpbmcgdGhlbSB0byB0aGUgb3JkZXJzREJcclxuaW5nX2xpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gIGlmKGUudGFyZ2V0Lm5vZGVOYW1lICE9PSAnVUwnKXtcclxuICAgIGxldCBpZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnaW5ncmVkaWVudC1pZCcpO1xyXG5cclxuICAgIGluZ0RCLmRvYyhpZClcclxuICAgICAgICAgLmdldCgpXHJcbiAgICAgICAgIC50aGVuKChpbmdyZWRpZW50KSA9PiB7XHJcbiAgICAgICAgICBvcmRlcnNEQi5kb2Mob3JkZXJJRCkudXBkYXRlKHtcclxuICAgICAgICAgICAgaW5ncmVkaWVudHM6IGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLmFycmF5VW5pb24oaW5ncmVkaWVudC5kYXRhKCkubmFtZSArICcsICcgKyBpbmdyZWRpZW50LmRhdGEoKS5wcmljZSlcclxuICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBnZXRMaXN0KG9yZGVySUQpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vXHJcbi8vLS0tZGVsZXRpbmcgaW5ncmVkaWVudCBhbmQgZGVsZXRpbmcgaXQgZnJvbSBvcmRlcnNEQlxyXG5saXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XHJcbiAgaWYoZS50YXJnZXQudGFnTmFtZSA9PT0gJ0knKXtcclxuICAgICBjb25zdCBwb3NJRCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdwb3NpdGlvbi1pZCcpO1xyXG5cclxuICAgICAgb3JkZXJzREIuZG9jKG9yZGVySUQpXHJcbiAgICAgICAgLmdldCgpXHJcbiAgICAgICAgLnRoZW4oKGRvYykgPT4ge1xyXG4gICAgICAgICAgbGV0IGluZ0FyciA9IGRvYy5kYXRhKCkuaW5ncmVkaWVudHM7IC8vdG8gZGVsZXRlIGluZ3JlZGllbnQgZnJvbSBEQiB3ZSBhcmUgZ2V0dGluZyBhcnJheSBvZiBleGlzdGluZyBpbiBpbmdyZWRpZW50cy4uXHJcbiAgICAgICAgICBpbmdBcnIuc3BsaWNlKGluZ0Fyci5pbmRleE9mKGluZ0Fycltwb3NJRF0pLCAxKTsgLy8uLi5hbmQgZGVsZXRpbmcgaXQgZnJvbSBhcnJheSB1c2luZyBjdXN0b20gaW5kZXggdGhhdCB3ZSBjcmVhdGVkIGZvciBlYWNoIGVsZW1lbnQuLi5cclxuICAgICAgICAgIG9yZGVyc0RCLmRvYyhvcmRlcklEKS51cGRhdGUoe1xyXG4gICAgICAgICAgICBpbmdyZWRpZW50czogaW5nQXJyIC8vLi4uYW5kIHVwZGF0aW5nIERCIHdpdGggbmV3IGFycmF5IG9mIGluZ3JlZGllbnRzXHJcbiAgICAgICAgICB9KS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZ2V0TGlzdChvcmRlcklEKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbn0pXHJcbiBcclxuXHJcbi8vXHJcbi8vLS0tc2VhcmNoaW5nIGluZ3JlZGllbnRzLCB3aGVuIHR5cGluZyBpdCBmaWx0ZXJzIGluZ3JlZGllbnRzIGJ5IGxldHRlcnMgd2UgYXJlIHR5cGluZ1xyXG5jb25zdCBmaWx0ZXJJbmdyZWRpZW50cyA9ICh0ZXJtKSA9PiB7XHJcbiAgQXJyYXkuZnJvbShpbmdfbGlzdC5jaGlsZHJlbilcclxuICAgICAgLmZpbHRlcigoaW5ncmVkaWVudCkgPT4gIWluZ3JlZGllbnQudGV4dENvbnRlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh0ZXJtKSlcclxuICAgICAgLmZvckVhY2goKGluZ3JlZGllbnQpID0+IGluZ3JlZGllbnQuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJykpO1xyXG5cclxuICBBcnJheS5mcm9tKGluZ19saXN0LmNoaWxkcmVuKVxyXG4gICAgICAuZmlsdGVyKChpbmdyZWRpZW50KSA9PiBpbmdyZWRpZW50LnRleHRDb250ZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGVybSkpXHJcbiAgICAgIC5mb3JFYWNoKChpbmdyZWRpZW50KSA9PiBpbmdyZWRpZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpKTtcclxufTtcclxuXHJcbnNlYXJjaC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsICgpID0+IHtcclxuICBjb25zdCB0ZXJtID0gc2VhcmNoLnZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gIGZpbHRlckluZ3JlZGllbnRzKHRlcm0pO1xyXG59KTtcclxuXHJcblxyXG5cclxuLy9cclxuLy8tLS1NYXRlcmlhbGlzZSBpbml0XHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZSkgPT4ge1xyXG4gIHZhciBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VsZWN0Jyk7XHJcbiAgdmFyIGluc3RhbmNlID0gTS5Gb3JtU2VsZWN0LmluaXQoZWxlbSk7XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKCkge1xyXG4gIHZhciBpbnN0YW5jZSA9IE0uQ29sbGFwc2libGUuaW5pdChjb2xsYXBzKTtcclxuICBjcmVhdGUuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGluc3RhbmNlLm9wZW4oKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgdmFyIGVsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2lkZW5hdicpO1xyXG4gIHZhciBpbnN0YW5jZSA9IE0uU2lkZW5hdi5pbml0KGVsZW0pO1xyXG59KTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucGFyYWxsYXgnKTtcclxuICB2YXIgaW5zdGFuY2VzID0gTS5QYXJhbGxheC5pbml0KGVsZW1zKTtcclxufSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==